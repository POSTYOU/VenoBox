/*
 * VenoBox - jQuery Plugin
 * version: 1.5.3
 * @requires jQuery
 *
 * Examples at http://lab.veno.it/venobox/
 * License: MIT License
 * License URI: https://github.com/nicolafranchini/VenoBox/blob/master/LICENSE
 * Copyright 2013-2015 Nicola Franchini - @nicolafranchini
 *
 */
!function(t){function a(){t.ajax({url:u,cache:!1}).done(function(t){h.html('<div class="vbox-inline">'+t+"</div>"),d(!0)}).fail(function(){h.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),d(!0)})}function e(){h.html('<iframe class="venoframe" src="'+u+'"></iframe>'),d()}function i(){var t=u.split("/"),a=t[t.length-1];h.html('<iframe width="500" height="281" class="venoframe" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0" src="https://player.vimeo.com/video/'+a+'"></iframe>'),d()}function o(){var t=u.split("/"),a=t[t.length-1];h.html('<iframe class="venoframe" allowfullscreen src="//www.youtube.com/embed/'+a+'"></iframe>'),d()}function n(){h.html('<div class="vbox-inline">'+t(u).html()+"</div>"),d()}function r(){L=t(".vbox-content").find("img"),L.one("load",function(){d()}).each(function(){this.complete&&t(this).load()})}function d(){v.html(P),h.find(">:first-child").addClass("figlio"),t(".figlio").css("width",k).css("height",C).css("padding",f).css("background",c),G=h.outerHeight(),B=t(window).height(),B>G+80?(H=(B-G)/2,h.css("margin-top",H),h.css("margin-bottom",H)):(h.css("margin-top","40px"),h.css("margin-bottom","40px")),"undefined"!=typeof K&&t.isFunction(K)?h.animate({opacity:"1"},"slow",K):h.animate({opacity:"1"},"slow")}function l(){t(".vbox-content").length&&(G=h.height(),B=t(window).height(),B>G+80?(H=(B-G)/2,h.css("margin-top",H),h.css("margin-bottom",H)):(h.css("margin-top","40px"),h.css("margin-bottom","40px")))}var c,s,v,f,m,b,h,u,g,x,p,y,w,k,C,j,q,z,H,D,E,F,L,P,Q,X,A,B,G,I,J,K;t.fn.extend({venobox:function(d){var l={framewidth:"",frameheight:"",border:"0",bgcolor:"#fff",titleattr:"title",numeratio:!1,infinigall:!1,overlayclose:!0,callback:void 0},H=t.extend(l,d);return this.each(function(){var d=t(this);return d.data("venobox")?!0:(d.addClass("vbox-item"),d.data("framewidth",H.framewidth),d.data("frameheight",H.frameheight),d.data("border",H.border),d.data("bgcolor",H.bgcolor),d.data("numeratio",H.numeratio),d.data("infinigall",H.infinigall),d.data("overlayclose",H.overlayclose),d.data("callback",H.callback),d.data("venobox",!0),void d.click(function(l){function L(){Q=d.data("gall"),D=d.data("numeratio"),j=d.data("infinigall"),q=t('.vbox-item[data-gall="'+Q+'"]'),q.length>0&&D===!0?(s.html(q.index(d)+1+" / "+q.length),s.show()):s.hide(),X=q.eq(q.index(d)+1),A=q.eq(q.index(d)-1),d.attr(H.titleattr)?(P=d.attr(H.titleattr),v.show()):(P="",v.hide()),q.length>0&&j===!0?(I=!0,J=!0,X.length<1&&(X=q.eq(0)),q.index(d)<1&&(A=q.eq(q.index(q.length)))):(X.length>0?(t(".vbox-next").css("display","block"),I=!0):(t(".vbox-next").css("display","none"),I=!1),q.index(d)>0?(t(".vbox-prev").css("display","block"),J=!0):(t(".vbox-prev").css("display","none"),J=!1))}function B(t){27===t.keyCode&&G()}function G(){t("body").removeClass("vbox-open"),t("body").unbind("keydown",B),F.animate({opacity:0},500,function(){F.remove(),z=!1,d.focus()})}l.stopPropagation(),l.preventDefault(),d=t(this),E=d.data("overlay"),k=d.data("framewidth"),C=d.data("frameheight"),f=d.data("border"),K=d.data("callback"),c=d.data("bgcolor"),I=!1,J=!1,z=!1,u=d.attr("href"),y=d.data("css")||"",t("body").addClass("vbox-open"),m='<div class="vbox-overlay '+y+'" style="background:'+E+'"><div class="vbox-preloader">Loading...</div><div class="vbox-container"><div class="vbox-content"></div></div><div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">X</div><div class="vbox-next">next</div><div class="vbox-prev">prev</div></div>',t("body").append(m),F=t(".vbox-overlay"),b=t(".vbox-container"),h=t(".vbox-content"),s=t(".vbox-num"),v=t(".vbox-title"),h.html(""),h.css("opacity","0"),L(),F.css("min-height",t(window).outerHeight()),F.animate({opacity:1},250,function(){"iframe"==d.data("type")?e():"inline"==d.data("type")?n():"ajax"==d.data("type")?a():"vimeo"==d.data("type")?i():"youtube"==d.data("type")?o():(h.html('<img src="'+u+'">'),r())});var M={prev:function(){z||(z=!0,E=A.data("overlay"),k=A.data("framewidth"),C=A.data("frameheight"),f=A.data("border"),c=A.data("bgcolor"),u=A.attr("href"),P=A.attr(H.titleattr)?A.attr(H.titleattr):"",void 0===E&&(E=""),h.animate({opacity:0},500,function(){F.css("background",E),"iframe"==A.data("type")?e():"inline"==A.data("type")?n():"ajax"==A.data("type")?a():"youtube"==A.data("type")?o():"vimeo"==A.data("type")?i():(h.html('<img src="'+u+'">'),r()),d=A,L(),z=!1}))},next:function(){z||(z=!0,E=X.data("overlay"),k=X.data("framewidth"),C=X.data("frameheight"),f=X.data("border"),c=X.data("bgcolor"),u=X.attr("href"),P=X.attr(H.titleattr)?X.attr(H.titleattr):"",void 0===E&&(E=""),h.animate({opacity:0},500,function(){F.css("background",E),"iframe"==X.data("type")?e():"inline"==X.data("type")?n():"ajax"==X.data("type")?a():"youtube"==X.data("type")?o():"vimeo"==X.data("type")?i():(h.html('<img src="'+u+'">'),r()),d=X,L(),z=!1}))}};t("body").keydown(function(t){37==t.keyCode&&1==J&&M.prev(),39==t.keyCode&&1==I&&M.next()}),t(".vbox-prev").click(function(){M.prev()}),t(".vbox-next").click(function(){M.next()});var N=".vbox-close, .vbox-overlay";return d.data("overlayclose")||(N=".vbox-close"),t(N).click(function(a){g=".figlio",p=".vbox-prev",x=".vbox-next",w=".figlio *",t(a.target).is(g)||t(a.target).is(x)||t(a.target).is(p)||t(a.target).is(w)||G()}),t("body").keydown(B),!1}))})}}),t(window).resize(function(){l()})}(jQuery);
